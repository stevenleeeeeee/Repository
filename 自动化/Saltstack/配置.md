#### /etc/salt/master
```bash
[root@localhost ~]# cat /etc/salt/master
#master可以从其他文件读取配置，默认情况下master将自动的将master.d/*.conf中的配置读取出来并应用
#default_include: master.d/*.conf

#master可以包含其他文件中的配置，通过此参数定义路径或文件，此路径可以是相对的也可以是绝对或相对的
#若路径是相对的则会被看作相对于主配置文件所在的目录，路径中还可以使用类似于shell风格的通配符
#include:
#   - extra_config
#   - master.d/*
#   - /etc/roles/webserver
#interface: 0.0.0.0		#绑定到本地的某个网络地址接口开始监听
#ipv6: False            #是否启用IPv6
#publish_port: 4505		#设置master与minion的认证通信端口
#user: root             #运行salt进程的用户
#master_id: MasterOfMaster  #发布作业时传给minions的id。用于MultiSyndics将作业返回给请求主服务器(必须syndic的配置相同)
#max_open_files: 100000	#每个minion连接到master至少使用1个文件描述符

#worker_threads: 5		#用来接收或应答minion的线程数，因minion太多引起响应延迟的话可提高此值
#ret_port: 4506			#这个端口是master用来发送命令或者接收minions的命令执行返回信息
#pidfile: /var/run/salt-master.pid  #指定master的pid文件位置
#root_dir: /			#该目录为salt运行根目录，改变它可使salt从另外一个目录开始运行，好比chroot 
#pki_dir: /etc/salt/pki/master	    #默认：/etc/salt/pki 用来存放pki认证秘钥 
#cachedir: /var/cache/salt/master	#默认：/var/cache/salt 用来存放缓存信息，salt工作执行的命令信息
#keep_jobs: 24			#保持老的工作信息的过期时间，单位小时
#extension_modules: <no default>
#module_dirs: <no default>
#verify_env: True		#在启动时验证和设置权限配置目录
#timeout: 5				#master执行命令的可以接受的延迟时间
#loop_interval: 60
#output: nested			#salt命令的输出格式
#show_timeout: True
#color: True
#event_return: cassandra_cql    #指定要用于记录事件的返回者。返回者可能有安装和配置要求。
#max_minions: 0                 #最大的minion数量，0表示不限制
#file_recv: False               #Allow minions to push files to the master. 
#sock_dir: /var/run/salt/master	#指定unix socket主进程通信的socket路径，默认：/var/run/salt/master 

#设置master维护的工作缓存，这是很好的功能，当Minons超过5000台时将很好的承担这个大的架构
#关闭这个选项，之前的工作执行以及工作系统将无法被利用，一般不推荐关掉，开启将使master获得更快的IO
#job_cache: True

#对所有的minions使用指定的默认值returner
#当使用了这个参数来指定一个returner并且配置正确，minions将会一直将数据返回到returner，这也会默认值禁用master的本地缓存
#ext_job_cache: redis

#是关于minion信息存储在master上的参数，这些信息主要是pillar和grains数据
#这些数据被缓存在cachedir定义的目录下的minion目录下以minion名为名的目录下且预先确定哪些minions将从执行回复
#minion_data_cache: True
#
#event_return: mysql
#event_return_queue: 0

#max_event_size: 1048576

#preserve_minion_cache: False

##########################################  Master的安全配置
#危险的安全特性，当master遇到pki认证系统，秘钥混淆和身份验证失效时，打开open_mode，master将接受所有身份验证
#这将清理掉pki秘钥接受的minions。通常情况下open_mode不应被打开，它只适用于短时间内清理pki keys
#open_mode: False

#这个设置将会使master自动接受所有发送公钥的minions
#auto_accept: False

#如果autosign_file的值被指定，那么autosign_file将会通过该输入允许所有的匹配项
#首先会搜索字符串进行匹配，然后通过正则表达式进行匹配。这是不安全的
#autosign_file: /etc/salt/autosign.conf


#autoreject_file: /etc/salt/autoreject.conf

#permissive_pki_access: False

#开启对系统上非root的系统用户在master上执行特殊的模块，这些模块名可以使用正则表达式进行表示
#client_acl:
#  <USERNAME>:
#    - <module>.<func>
#    - <module>.*

#黑名单用户或模块
#这个例子表示所有非sudo用户以及root都无法通过cmd这个模块执行命令，默认情况该配置是完全禁用的
#client_acl_blacklist:
#   users:
#       - root
#       - '^(?!sudo_).*$'    # all non sudo users
#   modules:
#       - cmd

#sudo_acl: False

#salt的认证模块采用外部的认证系统用来做认证和验证用户在salt系统中的访问区域
#external_auth:
#    pam:
#        fred:
#            - test.*

#token_expire: 43200        #新令牌生成的时间间隔，单位秒，默认是12小时

#允许minions推送文件到master，出于安全考虑默认禁用
#file_recv: False
#file_recv_max_size: 100

##########################################
#roster_file: /etc/salt/roster
#ssh_minion_opts:
##########################################
#runner_dirs: []            #默认值：[] 设置搜索runner模块的额外路径
#cython_enable: False       #设置为true来开启对cython模块的编译
##########################################
#状态系统使用入口文件告诉minions在什么环境下使用什么模块，这个状态入口文件被定义在基础环境的相对根路径下
#state_top: top.sls

#master_tops: {}

#这个外部节点参数允许salt来收集一些数据，通常被放置在一个入口文件或外部节点控制器.外部节点的选择是可执行的，将会返回ENC数据
#记住如果两者都启用的话salt会将外部节点和入口文件的结果进行综合汇总。
#external_nodes: None

#renderer: yaml_jinja		#使用渲染器用来渲染minions的状态数据

#jinja_trim_blocks: False
#jinja_lstrip_blocks: False

#failhard: False			#设置一个全局的failhard标识，当单个状态执行失败后将通知所有的状态停止运行状态

#允许从minions返回更多详细的信息，通常清空下只返回失败或者已经更改，但将设为True将返回所有的状态检查
#state_verbose: True

#state_output: full
# state_output的设置将会改变信息输出的格式
# 当设为"full"时，将全部的输出一行一行的显示输出
# 当设为"terse"时，将会被缩短为一行进行输出
# 当设为"mixed"时，输出样式将会是简洁的，除非状态失败，这种情况下将会全部输出
# 当设为"change"时，输出将会完全输出除非状态没有改变

#state_aggregate: False
#state_events: False

##########################################
#salt运行一个轻量级的文件服务器通过ZeroMQ对minions进行文件的传输!
#文件服务器的工作环境传递给master，每一个环境可以有多个根目录，此文件服务器构造在master的守护进程中并且不依赖专用端口
# file_roots:
#   base:
#     - /srv/salt/
#   dev:
#     - /srv/salt/dev/services
#     - /srv/salt/dev/states
#   prod:
#     - /srv/salt/prod/services
#     - /srv/salt/prod/states

#hash_type: md5		        #当发现在master上需要对一个文件进行hash时的hash使用的算法
#file_buffer_size: 1048576	#文件服务器的缓存区大小 
#file_ignore_regex:

#salt支持模块化的后端文件系统服务器，它允许salt通过第三方的系统来管理收集文件并提供给minions使用
#它允许salt通过第三方的系统来管理收集文件并提供给minions使用，可以配置多个后端文件系统
#fileserver_backend:
#  - roots
#  - gitfs

#fileserver_followsymlinks: False
#fileserver_ignoresymlinks: True
#fileserver_events: False

#gitfs_provider: gitpython
#gitfs_remotes:
#gitfs_ssl_verify: True
#gitfs_root: somefolder/otherfolder

##########################################
#设置不同的环境对应的存放pillar数据的目录，这个配置和file_roots参数配置一样
#pillar_roots:
#    base:
#       - /srv/pillar
#    dev:
#       - /srv/pillar/dev
#    prod:
#       - /srv/pillar/prod

#ext_pillar:
#ext_pillar_first: False

#pillar_gitfs_ssl_verify: True
#pillar_opts: False
#pillar_safe_render_error: True
#pillar_source_merging_strategy: smart

##########################################
#syncdic是salt master用来通过从整体架构中高于自己层级的master或者syndic接收命令传递给minions的中间角色。
#使用syndic很简单，如果这个master在整体架构中他的下级存在syndic server，那么需要将master配置中的"order_master"设为True
#如果这个master还需要运行一个syndic进程，扮演另外一个角色，那么需要设置主master server的信息(上一级master)
#千万别忘记了，这将意味着它将与其他master共享它的minion的id和pki_dir

#当额外的数据需要发送和传递并且这个master控制的minions是被低等级的master或syndic直接管理下那么"order_masters"须设为True 
#order_masters: False

#如果这个master运行的salt-syndic连接到了一个更高层级的master,那么这个参数需要配置成连接到的这个高层级的master的地址
#syndic_master: masterofmaster

#如果这个master运行的salt-syndic连接到了一个更高层级的master,那么这个参数需要配置成连接到的这个高层级master的监听端口 
#syndic_master_port: 4506
#syndic_pidfile: /var/run/salt-syndic.pid   #为syndic进程指定pid文件 
#syndic_log_file: syndic.log                #为syndic进程指定日志文件

##########################################
#salt minions可以向其他minions发送命令！，但是仅仅在minion允许的情况下。默认情况下"Peer Publication"是关闭的
#当需要开启的时候，需要开启对应的minion和对应的命令，这样可以允许根据个人的minions安全的划分出命令

#这个配置使用正则表达式去匹配minions并且是一个正则表达式列表函数
#下面这个例子将允许名为foo.example.com的minion认证通过后执行test和pkg模块中的函数 
#peer:
#  foo.example.com:
#      - test.*
#      - pkg.*

#peer_run参数是用来打开runners在master所允许的minions上，peer_run的配置匹配格式和peer参数的配置一样
#下面这个例子允许foo.example.com的minion执行manage.up runner 
#peer_run:
#    foo.example.com:
#        - manage.up

##########################################

#master的日志可以发送到一个普通文件，本地路径名或者网络位置
#log_file: /var/log/salt/master		#
#log_file: file:///dev/log
#log_file: udp://loghost:10514
#log_file: /var/log/salt/master
#key_logfile: /var/log/salt/key

#log_level: warning
#log_level_logfile: warning
#log_datefmt: '%H:%M:%S'
#log_datefmt_logfile: '%Y-%m-%d %H:%M:%S'
#log_fmt_console: '[%(levelname)-8s] %(message)s'
#log_fmt_logfile: '%(asctime)s,%(msecs)03.0f [%(name)-17s][%(levelname)-8s] %(message)s'

#log_granular_levels: {}

##########################################	通过node groups将minion分成多个逻辑组，每个组由组名和复合模式组成 
#nodegroups:
#    group1: 'L@foo.domain.com,bar.domain.com,baz.domain.com or bl*.domain.com'
#    group2: 'G@os:Debian and foo.domain.com'

##########################################
#range_server: range:80

##############################################
#win_repo: '/srv/salt/win/repo'
#win_repo_mastercachefile: '/srv/salt/win/repo/winrepo.p'
#win_gitrepos:

############################################
#return: mysql
```
#### /etc/salt/minion 配置文件说明
```bash
[root@localhost ~]# cat /etc/salt/minion | grep -v '^# '
##### Primary configuration settings #####
##########################################
#default_include: minion.d/*.conf
#master: salt		#master服务器的ID
#random_master: False
#master_shuffle: False
#ipv6: False
#master_port: 4506
#user: root
#sudo_user: saltdev
#pidfile: /var/run/salt-minion.pid

#指定该目录为salt运行的根目录，改变它可以使salt从另外一个目录开始运行，好比chroot 
#root_dir: /
#pki_dir: /etc/salt/pki/minion

#不指定的话，salt通过socket.getfqdn()来获取主机的名称来作为标识，若指定的话ID则直接作为minion与master交互的身份标识
#id:

#指定一个主机名称或域名，当socket.getfqdn()获取主机标识失败时可以用来作为替补ID
#append_domain:

#grains相当于对minion特别信息的匹配对象组
#grains:

#cachedir: /var/cache/salt/minion   #这个目录是用来存放缓存信息，特别是salt工作执行的命令信息
#verify_env: True
#cache_jobs: False          #minion在本地缓存salt执行过的命令返回数据。可以减少命令执行时间，减低IO，但结果可能不会实时
#sock_dir: /var/run/salt/minion
#output: nested                     #设置salt-call的默认输出方式，nested是使用默认设置的来输出
#color: True
#backup_mode: minion
#acceptance_wait_time: 10           #等待master接受minion的认证时间
#acceptance_wait_time_max: 0        #断线重试次数，如果设置为0则无限次重试，如果大于0，则连接重试到该设置值
#rejected_retry: False
#random_reauth_delay: 60
#auth_timeout: 60
#auth_tries: 7
#auth_safemode: False
#ping_interval: 0
#loop_interval: 60
#grains_refresh_every: 1
#grains_cache: False
#ipc_mode: ipc
#tcp_pub_port: 4510
#tcp_pull_port: 4511

#max_event_size: 1048576
#master_alive_interval: 30

#include:
#
#####   Minion module management     #####
##########################################
#disable_modules: [cmd,test]
#disable_returners: []
#
#module_dirs: []
#returner_dirs: []
#states_dirs: []
#render_dirs: []
#utils_dirs: []
#
#providers:
#cython_enable: False

#####    State Management Settings    #####
###########################################
#renderer: yaml_jinja
#failhard: False
#autoload_dynamic_modules: True     #自动发现并加载master上的模块
#clean_dynamic_modules: True        #如果发现master上的模块已经清除，则自动清楚对应的模块

#master在运行states时通常不会把minion分割出来给任意一个单独的环境，但在minion端可以自行进行独立的环境设置
#environment: None

#使用一个入口文件告诉minions在什么环境下使用什么模块，这个状态入口文件被定义在基础环境的相对根路径下
#state_top: top.sls

#在minion daemon开始时执行states
#startup_states: ''
#sls_list:

#top_file: ''

#state_aggregate: False

#####     File Directory Settings    #####
##########################################
#设置minion的文件客户端，默认为reomote，默认minion到master查找文件；设为local则minion会在本地查找配置文件
#file_client: remote

#设置文件客户端路径	            
#file_roots:

#设置saltstack查找state文件时，仅遍历查找带sls后缀的文件或是带_modules后缀的目录
#fileserver_limit_traversal: False

#hash_type: md5

#当file_client设置为local时候，该参数制定pillar的搜索路径
#pillar_roots:
#base:
#  - /srv/pillar
######        Security settings       #####
###########################################
#open_mode: False
#permissive_pki_access: False
#state_verbose: True
#state_output: full
#state_output_diff: False
#state_output_profile: True
#master_finger: ''

######         Thread settings        #####
###########################################
#multiprocessing: True

#####         Logging settings       #####
##########################################
#log_file: /var/log/salt/minion
#log_file: file:///dev/log
#log_file: udp://loghost:10514
#log_file: /var/log/salt/minion
#key_logfile: /var/log/salt/key

#log_level: warning                                 #按照日志级别发送信息到控制台
#log_level_logfile:                                 #按照日志级别发送信息到日志文件
#log_datefmt: '%H:%M:%S'                            #发送到控制台信息所用的日期时间格式
#log_datefmt_logfile: '%Y-%m-%d %H:%M:%S'           #发送到日志文件信息所用的日期时间格式
#log_fmt_console: '[%(levelname)-8s] %(message)s'   #控制台日志信息格式
#log_fmt_logfile: '%(asctime)s,%(msecs)03.0f [%(name)-17s][%(levelname)-8s] %(message)s'    #日志文件信息格式
#log_granular_levels: {}                            #这可以更加具体的控制日志记录级别

#   默认值: %(asctime)s,%(msecs)03.0f [%(name)-17s][%(levelname)-8s] %(message)s
#   %(asctime)s：2003-07-08 16:49:45
#   %(msecs)03.0f：当前时间的毫秒部分
#   %(name)：日志记录调用器的名字
#   %(levelname)：日志记录级别
#   %(message)s：日志详细信息

#zmq_monitor: False

######      Module configuration      #####
###########################################
#test: True                                         #指定允许所有的模块运行测试模式
#test.foo: foo                                      #给测试模块test.foo指定一个简单的值
#test.bar: [baz,quo]
#test.baz: {spam: sausage, cheese: bread}
#
######      Update settings          ######
###########################################
#
#update_url: False
#update_restart_services: []

######      Keepalive settings        ######
############################################
#tcp_keepalive: True
#tcp_keepalive_idle: 300
#tcp_keepalive_cnt: -1
#tcp_keepalive_intvl: -1

######   Windows Software settings    ######
############################################
#win_repo_cachefile: 'salt://win/repo/winrepo.p'

######      Returner  settings        ######
############################################
#return: mysql
```