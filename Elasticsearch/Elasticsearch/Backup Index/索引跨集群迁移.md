```bash
# https://cloud.tencent.com/developer/article/1145944

# 以下操作表示从源ES集群中查询名为test1的索引，查询条件为title字段为elasticsearch，将结果写入当前集群的test2索引

POST _reindex   # 先创建Mapping
{
	"source": {
		"remote": {
			"host": "http://172.16.0.39:9200",  # 远程es的ip和port列表
            "username": "xxxx",
            "password": "xxxx",
            "socket_timeout": "1m",
            "connect_timeout": "10s"    # 超时时间设置
		},
		"index": "test",
        "size": 3000,       # 每次获取3000条数据
		"query": {          # 满足条件的数据
			"match_all": { }
		}
	},
	"dest": {
	 	"index": "test"     # 目标索引名称
	}
}

# 注意
# 被复制的远程主机必须在elasticsearch.yaml配置文件使用reindex.remote.whitelist属性显式列入白名单：
# reindex.remote.whitelist: "otherhost:9200, another:9200, 127.0.10.*:9200, localhost:*"
```
#### 在Logstash执行数据迁移 ( 先创建Mapping )
```bash
input {
  elasticsearch {
    hosts => ["XX.XX.XX.XX:9212","XX.XX.XX.XX:9212","XX.XX.XX.XX:9212"]
    index => "<INDEX>"
    size => 1000
    scroll => "5m"
    docinfo => true
    user => 'username...'
    password => "pass...."
  }
}

filter {
#   mutate {
#     remove_field => ["@version"]
#   }
}

output {
  elasticsearch {
    hosts => ["XX.XX.XX.XX:9212","XX.XX.XX.XX:9212","XX.XX.XX.XX:9212"] 
    index => "%{[@metadata][_index]}"
    action => "create"      # 为文档建立索引，如果索引中已经存在具有该ID的文档，则该索引将失败。
    user => "elasticsearch"
    password => "elastic"
    codec => "json"
  }
}
```